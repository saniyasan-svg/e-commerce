<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zyara - Checkout</title>
  <style>
    /* General Styles */
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #007BFF 0%, #00C6FF 100%);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    /* Checkout Form Container */
    .checkout-form {
      max-width: 600px;
      background: #ffffff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .checkout-form h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #007BFF;
    }

    /* Input Fields */
    .checkout-form input[type="text"] {
      width: calc(100% - 20px);
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }

    /* Buttons */
    .checkout-form button {
      width: 100%;
      padding: 12px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.3s;
    }

    .checkout-form button:hover {
      background-color: #0056b3;
    }

    /* Payment Section */
    #paymentSection {
      display: none;
      margin-top: 20px;
    }

    .order-summary {
      margin-top: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 10px;
      text-align: left;
    }

    .order-summary h3 {
      font-size: 20px;
      margin-bottom: 10px;
      color: #007BFF;
    }

    .order-summary p {
      font-size: 16px;
      color: #555;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: #ffffff;
      padding: 30px;
      width: 400px;
      border-radius: 12px;
      text-align: center;
      position: relative;
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.2);
    }

    .modal-content h2 {
      font-size: 24px;
      color: #007BFF;
      margin-bottom: 20px;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 18px;
      cursor: pointer;
      background: none;
      border: none;
      color: #333;
    }

    .form-container input {
      width: calc(100% - 20px);
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }

    .form-container button {
      background: #007BFF;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    .form-container button:hover {
      background: #0056b3;
    }

    .toggle-link {
      color: #007BFF;
      cursor: pointer;
      text-decoration: underline;
    }

    /* Responsive Design */
    @media (max-width: 480px) {
      .checkout-form {
        width: 90%;
        padding: 20px;
      }

      .modal-content {
        width: 90%;
      }
    }
  </style>
</head>
<body>

  <div class="checkout-form">
    <form id="checkoutForm">
      <h2>Shipping Details</h2>
      <label for="name">Full Name</label>
      <input type="text" id="name" placeholder="Full Name" required />

      <label for="address">Address</label>
      <input type="text" id="address" placeholder="Address" required />

      <label for="city">City</label>
      <input type="text" id="city" placeholder="City" required />

      <label for="pincode">Pincode</label>
      <input type="text" id="pincode" placeholder="Pincode" required />

      <button type="button" onclick="ensureAuthentication()">Proceed to Payment</button>

      <div id="paymentSection">
        <h2>Payment Details</h2>
        <label><input type="radio" name="payment" value="card" required /> Credit/Debit Card</label>
        <label><input type="radio" name="payment" value="upi" required /> UPI</label>
        <label><input type="radio" name="payment" value="cod" required /> Cash on Delivery</label>

        <div class="order-summary">
          <h3>Order Summary</h3>
          <p id="order-total">Total: ₹0.00</p>
        </div>

        <button type="submit">Place Order</button>
      </div>
    </form>
  </div>

  <!-- Login/Signup Modal -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">&times;</button>

      <!-- Login Form -->
      <div id="loginForm" class="form-container active">
        <h2>Login</h2>
        <input type="email" placeholder="Email" required>
        <input type="password" placeholder="Password" required>
        <button onclick="authenticateUser()">Login</button>
        <p>Don't have an account? <span class="toggle-link" onclick="switchToSignup()">Sign Up</span></p>
      </div>

      <!-- Signup Form -->
      <div id="signupForm" class="form-container">
        <h2>Sign Up</h2>
        <input type="text" placeholder="Full Name" required>
        <input type="email" placeholder="Email" required>
        <input type="password" placeholder="Password" required>
        <button onclick="authenticateUser()">Sign Up</button>
        <p>Already have an account? <span class="toggle-link" onclick="switchToLogin()">Login</span></p>
      </div>
    </div>
  </div>

  <script>
    let isAuthenticated = false;

    function ensureAuthentication() {
      if (!isAuthenticated) {
        openModal();
      } else {
        proceedToPayment();
      }
    }

    function openModal() {
      document.getElementById("authModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("authModal").style.display = "none";
    }

    function switchToSignup() {
      document.getElementById("loginForm").classList.remove("active");
      document.getElementById("signupForm").classList.add("active");
    }

    function switchToLogin() {
      document.getElementById("signupForm").classList.remove("active");
      document.getElementById("loginForm").classList.add("active");
    }

    function authenticateUser() {
      isAuthenticated = true;
      closeModal();
      alert("Authentication successful! Proceeding to payment.");
      proceedToPayment();
    }

    function calculateTotal() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      let total = 0;
      cart.forEach(item => {
        total += item.price * item.qty;
      });
      return total.toFixed(2);
    }

    function proceedToPayment() {
      const name = document.getElementById("name").value.trim();
      const address = document.getElementById("address").value.trim();
      const city = document.getElementById("city").value.trim();
      const pincode = document.getElementById("pincode").value.trim();

      if (!name || !address || !city || !pincode) {
        alert("Please fill all shipping details before proceeding to payment.");
        return;
      }

      document.getElementById("paymentSection").style.display = "block";
      document.getElementById("order-total").innerText = `Total: ₹${calculateTotal()}`;
    }

    document.getElementById("checkoutForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const paymentMethod = document.querySelector('input[name="payment"]:checked');
      if (!paymentMethod) {
        alert("Please select a payment method.");
        return;
      }

      alert(`Order Placed Successfully via ${paymentMethod.value.toUpperCase()}!`);
      localStorage.removeItem("cart");
      window.location.href = "sucess.html"; // Redirect to a thank-you page
    });
  </script>
</body>
</html>